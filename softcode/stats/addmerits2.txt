&C.+ADDMERIT #11308=$+addmerit *=*/*:[setq(0,[edit([edit([setr(1,caplist(caplist(secure(%0)),-))],%b,-)],|,)])]; @break hasattr(%vV/valid-merits-%q0)=@pemit %#={msg(cc,Staff,The merit '%q1' already exists. You will need to +delmerit first.)};@break gte(match(setr(2,iter(setr(3,caplist(caplist(edit(%1,%b,:)),-)),match(get(%vV/valid-faction),##,|),:)),0),1)=@pemit %#={msg(cc,Staff,Unrecognized faction%(s%) [elist(iter(%q3,if(match(get(%vV/valid-faction),##,|),,##),:))].)};@break gte(match(iter(setr(4,edit(%2,%b,:)),isnum(##),:),0),1)=@pemit %#={msg(cc,Staff,Merits can only be assigned numeric values. [elist(iter(%q4,if(isnum(##),,##),:))] will need to be changed to add this merit.)};@break gte(ladd(iter(%q4,gt(##,5)%b[lt(##,1)],:)),1)={@pemit %#=msg(cc,Staff,Error. Merits can only be given numeric values between 1-5.)}; &valid-merits-%q0 %vV=%q1|%q3|0:%q4;@pemit %#=msg(cc,Staff,You add the %q1 merit for the [elist(%q3,:)] faction%(s%) with value%(s%) %q4.)
&C.+DELMERIT #11308=$+delmerit *:&valid-merits-[edit(secure(%0),%b,-)] %vV=;@pemit %#=msg(cc,Staff,You remove the merit [caplist(caplist(%0),-)] from the list.)
&C.+VIEWMERIT #11308=$+viewmerit *:@break not(hasattr(%vV/valid-merits-[edit(secure(%0),%b,-)]))=@pemit %#=msg(cc,Staff,No such merit to view: [secure(%0)].);think setq(0,get(%vV/valid-merits-[edit(secure(%0),%b,-)]));@pemit %#=header(mudname() Merits -- [first(%q0,|)])%r%ch%crEligible Factions:%cn%r[elist(extract(%q0,2,1,|),,:)]%r%r%cr%chValid Values:%cn%b[elist(rest(extract(%q0,3,1,|),:),,:)]%r[tail()]
